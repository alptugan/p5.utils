!function (e, t) { "function" == typeof define && define.amd ? define("p5.Utils", ["p5"], (function (e) { t(e) })) : "object" == typeof exports ? t(require("p5")) : t(e.p5) }(this, (function (e) { var t, r, l, o, i, s, n, a, p = !1, u = 0; const d = 0; function h(e) { if (this.drawHorizontalRuler(), null != r) { let p = r.getBoundingClientRect(); l.strokeStyle = p5rulerTickColor, l.beginPath(), l.moveTo(e.pageX - p.left - .5, 0), l.lineTo(e.pageX - p.left - .5, p5rulersize), l.stroke(), this.drawVerticalRuler(), i.strokeStyle = p5rulerTickColor, i.beginPath(), i.moveTo(0, e.pageY - .5 - 3), i.lineTo(p5rulersize, e.pageY - .5 - 3), i.stroke(), t = e.pageX - p5rulersize, o = e.pageY - p5rulersize, s.style.width = t + "px", s.style.marginright = width - t + "px", s.style.left = p5rulersize + "px", s.style.top = o - 4 + p5rulersize + "px", s.style.boxShadow = "0px 0px 5px rgba(0,0,0,0.7)", n.style.height = o - 4 + "px", n.style.width = t - 1 + p5rulersize + "px", n.style.marginleft = t - 1 + "px", n.style.top = p5rulersize + "px", n.style.boxShadow = "0px 0px 5px rgba(0,0,0,0.7)", t + 70 < width && (a.style.left = t + p5rulersize + 10 + "px"), o + 70 < height && (a.style.top = o + p5rulersize + 20 + "px"), a.innerHTML = "x:" + t + "<br>y:" + (o - 3) } var t, o } e.Utils = function () { this.version = .1, this.att = [], this.row = 0, this.col = 0, this.setRulerStyle() }, e.Utils.prototype.debug = function (e) { document.getElementsByClassName("debug")[0] || (debug = document.createElement("div"), debug.className = "debug", document.body.appendChild(debug), debug.style.left = "2px", debug.style.lineHeight = 1.3, debug.style.fontFamily = "Consolas, Menlo, Monaco, monospace", debug.style.fontSize = "11px", debug.style.fontWeight = 100, debug.style.fontStyle = "normal", debug.style.fontVariant = "normal", debug.style.position = "absolute", debug.style.marginLeft = "30px", debug.style.marginBottom = innerHeight - height + 30 + "px", debug.style.left = "0px", debug.style.bottom = "0px", debug.style.color = p5rulerInfoColor, debug.style.opacity = .5, debug.style.background = p5rulerInfoBgColor, debug.style.padding = "4px 6px", debug.style.borderRadius = "4px", debug.style.cursor = "none", debug.style.zindex = "99999"), debug.innerHTML = ""; for (let t = 0; t < Object.keys(e).length; t++)debug.innerHTML += "<i>" + Object.keys(e)[t] + ": </i>" + Object.values(e)[t] + "</br>" }, e.Utils.prototype.getTimeStamp = function (e = !0) { var t; t = second() >= 10 ? hour() + "-" + minute() + "-" + second() : hour() + "-" + minute() + "-0" + second(); var r = year() + "-" + month() + "-" + day(); return e ? r + "_" + t : t }, e.Utils.prototype.getRandomInt = function (e, t) { return e = Math.ceil(e), t = Math.floor(t), Math.floor(Math.random() * (t - e) + e) }, e.Utils.prototype.saveCanvas = function (e = "", t = "png") { "" == e ? saveCanvas(this.getTimeStamp(), t) : saveCanvas(e + "_" + this.getTimeStamp(), t) }, e.Utils.prototype.arrayResize = function (e, t, r = -1) { e.length = 0; for (let l = 0; l < floor(t); l++)-1 != r && e.push(r); return e.length = floor(t), e }, e.Utils.prototype.createGrid = function (e, t, r, l, o = !1, i = 0, s = d, n = !0, a = !0) { var p, u; this.row = e, this.col = t; var h = e > t ? max(r, l) : min(r, l), y = max(e, t); h -= i * y; var g = s == d ? h / y : h / t, c = s == d ? h / y : h / e; (f = (g + i) * t - i) / (x = (c + i) * e - i) > r / l ? (g = Math.floor(r / t) - i, c = Math.floor(r / t) - i) : (g = Math.floor(l / e) - i, c = Math.floor(l / e) - i); var f = (g + i) * t - i, x = (c + i) * e - i; p = n ? Math.floor(.5 * (width - f)) : 0, u = a ? Math.floor(.5 * (height - x)) : 0; for (var m = 0; m < e; m++)for (var b = 0; b < t; b++)this.att.push({ x: p + Math.floor(b * (g + i)), y: u + Math.floor(m * (c + i)), w: g, h: c }); return this.att }, e.Utils.prototype.debugGrid = function (e = 12, t = color(0), r = color(0, 200)) { push(); for (var l = 0; l < Math.floor(this.row * this.col); l++)noFill(), stroke(r), rect(this.att[l].x, this.att[l].y, this.att[l].w, this.att[l].h), fill(t), noStroke(), textSize(e), text(l, this.att[l].x + .4 * e, this.att[l].y + 1.2 * e); pop() }, e.Utils.prototype.beginShadow = function (e, t, r, l) { push(), drawingContext.shadowColor = e, drawingContext.shadowBlur = t, drawingContext.shadowOffsetY = l, drawingContext.shadowOffsetX = r }, e.Utils.prototype.endShadow = function () { pop() }, e.Utils.prototype.beginRadialGradient = function (e, t, r, l, o = -1, i = -1, s = -1, n = -1) { if (push(), fill(0), null == e || e.length < 2) noLoop(); else { -1 !== o && -1 !== i && -1 !== s || (o = t, i = r, l = .1 * (s = l)); var a = drawingContext.createRadialGradient(t, r, l, o, i, s); a.addColorStop(0, e[0]), e.length > 2 && (-1 == n ? a.addColorStop(.5, e[1]) : a.addColorStop(n, e[1])), a.addColorStop(1, e[e.length - 1]), drawingContext.fillStyle = a } }, e.Utils.prototype.endRadialGradient = function () { pop() }, e.Utils.prototype.beginLinearGradient = function (e, t, r, l, o, i = []) { push(), fill(100), 0 == i.length && (i = this.arrayResize(i, e.length, .5)); var s = drawingContext.createLinearGradient(t, r, l, o); s.addColorStop(0, e[0]); for (var n = 1; n < e.length - 1; n++)s.addColorStop(i[n], e[n]); s.addColorStop(1, e[e.length - 1]), drawingContext.fillStyle = s }, e.Utils.prototype.endLinearGradient = function () { pop() }, e.Utils.prototype.text = function (e, r, l, o = 12, i = "sans-serif", s = LEFT, n = TOP) { push(), "sans-serif" == i || p ? "sans-serif" == i && (t = "sans-serif", textFont(t)) : t = loadFont(i, (function () { textFont(t), p = !0 })), textSize(o), textAlign(s, n), text(e, r, l), pop() }, e.Utils.prototype.notify = function (e) { return millis() - u > 1e3 * e && (u = millis(), !0) }, e.Utils.prototype.setRulerStyle = function (e = "rgba(30,30,30,1)", t = "rgba(150,150,150,1)", r = 20, l = "rgba(30,30,30,1)", o = "rgba(255,255,255,0.5)", i = "rgba(255,0,0,1)", s = "11px monospace") { p5rulerBgColor = e, p5rulerTxtColor = t, p5rulersize = r, p5rulerInfoColor = l, p5rulerInfoBgColor = o, p5rulerTickColor = i, p5rulerFont = s }, e.Utils.prototype.disableRuler = function () { window.removeEventListener("mousemove", h), r.style.display = "none", o.style.display = "none", canvas.style.marginLeft = "0px", canvas.style.marginTop = "0px", canvas.style.width = width + "px", canvas.style.height = height + "px", a.style.display = "none", s.style.display = "none", n.style.display = "none" }, e.Utils.prototype.enableRuler = function () { var e = document.getElementsByClassName("p5Canvas")[0], t = width, p = height; width + p5rulersize > innerWidth && (t = width - p5rulersize, resizeCanvas(t, height)), height + p5rulersize > innerHeight && (p = height - p5rulersize, resizeCanvas(t, p)), e.style.marginLeft = p5rulersize + "px", e.style.marginTop = p5rulersize + "px", document.getElementsByClassName("pixelRulerH")[0] || ((r = document.createElement("canvas")).className = "pixelRulerH", document.body.appendChild(r)), r.width = width + p5rulersize > innerWidth ? width : width + p5rulersize, r.height = p5rulersize, r.style.zindex = 1e4, r.style.position = "absolute", r.style.left = "0px", r.style.top = "0px", r.style.width = width + p5rulersize > innerWidth ? width : width + p5rulersize, r.style.height = p5rulersize + "px", r.style.display = "block", l = r.getContext("2d"), drawHorizontalRuler(), document.getElementsByClassName("pixelRulerV")[0] || ((o = document.createElement("canvas")).className = "pixelRulerV", document.body.appendChild(o)), o.width = p5rulersize, o.height = height + p5rulersize > innerHeight ? height : height + p5rulersize, o.style.zindex = 1e4, o.style.position = "absolute", o.style.left = "0px", o.style.top = "0px", o.style.width = p5rulersize + "px", o.style.height = height + p5rulersize > innerHeight ? height : height + p5rulersize, o.style.display = "block", i = o.getContext("2d"), drawVerticalRuler(), document.getElementsByClassName("rulerLineX")[0] || ((s = document.createElement("div")).className = "rulerLineX", document.body.appendChild(s)), s.style.zindex = 1e5, s.style.position = "absolute", s.style.height = "0px", s.style.display = "block", s.style.border = "none", s.style.borderTop = "1px dashed " + p5rulerInfoColor, s.style.opacity = .7, document.getElementsByClassName("rulerLineY")[0] || ((n = document.createElement("div")).className = "rulerLineY", document.body.appendChild(n)), n.style.zindex = 100001, n.style.position = "absolute", n.style.height = "0px", n.style.width = "0px", n.style.display = "block", n.style.background = "rgba(255,255,255,0.2)", n.style.border = "none", n.style.borderRight = "1px dashed " + p5rulerInfoColor, n.style.opacity = .6, document.getElementsByClassName("rulerInfo")[0] || ((a = document.createElement("div")).className = "rulerInfo", document.body.appendChild(a)), a.style.zindex = 100002, a.style.position = "absolute", a.style.display = "block", a.style.top = "0px", a.style.left = "0px", a.style.fontSize = "11px", a.style.fontFamily = "monospace", a.style.color = p5rulerInfoColor, a.style.background = p5rulerInfoBgColor, a.style.padding = "3px", a.style.cursor = "none", window.addEventListener("mousemove", h) }, drawHorizontalRuler = function () { var e = l; e.clearRect(0, 0, r.width, p5rulersize), e.fillStyle = p5rulerBgColor, e.fillRect(0, 0, r.width, p5rulersize), e.strokeStyle = p5rulerTxtColor, e.lineWidth = 1, e.beginPath(), e.moveTo(0, p5rulersize), e.lineTo(r.width, p5rulersize), e.stroke(); for (var t = p5rulersize; t < r.width; t += 5)e.beginPath(), e.moveTo(t - .5, p5rulersize), e.lineTo(t - .5, p5rulersize - 4), e.stroke(); for (t = p5rulersize; t < r.width; t += 10)e.beginPath(), e.moveTo(t - .5, p5rulersize), e.lineTo(t - .5, p5rulersize - 7), e.stroke(); e.fillStyle = p5rulerTxtColor, e.font = p5rulerFont, e.textBaseline = "top"; for (t = p5rulersize; t < r.width; t += 100)e.beginPath(), e.moveTo(t - .5, p5rulersize), e.lineTo(t - .5, 0), e.stroke(), t > 0 && e.fillText(t.toFixed(0) - p5rulersize, t + 3, 1) }, drawVerticalRuler = function () { var e = i; e.clearRect(0, 0, p5rulersize, o.height), e.fillStyle = p5rulerBgColor, e.fillRect(0, 0, o.width, o.height), e.strokeStyle = p5rulerTxtColor, e.lineWidth = 1, e.beginPath(), e.moveTo(p5rulersize, 0), e.lineTo(p5rulersize, o.height), e.stroke(); for (var t = p5rulersize; t < o.height; t += 5)e.beginPath(), e.moveTo(p5rulersize, t - .5), e.lineTo(p5rulersize - 4, t - .5), e.stroke(); for (t = p5rulersize; t < o.height; t += 10)e.beginPath(), e.moveTo(p5rulersize, t - .5), e.lineTo(p5rulersize - 7, t - .5), e.stroke(); e.fillStyle = p5rulerTxtColor, e.font = p5rulerFont, e.textBaseline = "top"; for (t = p5rulersize; t < o.height; t += 100)e.beginPath(), e.moveTo(p5rulersize, t - .5), e.lineTo(0, t - .5), e.stroke(), t > p5rulersize && (e.save(), e.translate(1, t), e.rotate(-Math.PI / 2), e.fillText((t - p5rulersize).toFixed(0), 3, 1), e.restore()) } }));