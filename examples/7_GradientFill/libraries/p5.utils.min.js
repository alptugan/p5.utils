!function (e, t) { "function" == typeof define && define.amd ? define("p5.Utils", ["p5"], function (e) { t(e) }) : "object" == typeof exports ? t(require("p5")) : t(e.p5) }(this, function (e) { var a, o, i, n, l, s, r, d, p = !1, t = 0; const h = 20; var y = "rgba(30,30,30,1)", g = "rgba(150,150,150,1)", u = "rgba(30,30,30,1)", c = "rgba(255,0,0,1)"; function m(e) { var t; this.drawHorizontalRuler(), null != o && (t = o.getBoundingClientRect(), i.strokeStyle = c, i.beginPath(), i.moveTo(e.pageX - t.left - .5, 0), i.lineTo(e.pageX - t.left - .5, h), i.stroke(), this.drawVerticalRuler(), l.strokeStyle = c, l.beginPath(), l.moveTo(0, e.pageY - .5 - 3), l.lineTo(h, e.pageY - .5 - 3), l.stroke(), t = e.pageX - h, e = e.pageY - h, s.style.width = t + "px", s.style.marginright = width - t + "px", s.style.left = h + "px", s.style.top = e - 4 + h + "px", s.style.boxShadow = "0px 0px 5px rgba(0,0,0,0.7)", r.style.height = e - 4 + "px", r.style.width = t - 1 + h + "px", r.style.marginleft = t - 1 + "px", r.style.top = "20px", r.style.boxShadow = "0px 0px 5px rgba(0,0,0,0.7)", t + 70 < width && (d.style.left = t + 30 + "px"), e + 70 < height && (d.style.top = e + 40 + "px"), d.innerHTML = "x:" + t + "<br>y:" + (e - 3)) } e.Utils = function () { this.version = .01 }, e.Utils.prototype.debug = function (t) { document.getElementsByClassName("debug")[0] || (debug = document.createElement("div"), debug.className = "debug", document.body.appendChild(debug), debug.style.left = "2px", debug.style.lineHeight = 1.3, debug.style.fontFamily = "Consolas, Menlo, Monaco, monospace", debug.style.fontSize = "11px", debug.style.fontWeight = 100, debug.style.fontStyle = "normal", debug.style.fontVariant = "normal", debug.style.position = "absolute", debug.style.marginLeft = "30px", debug.style.marginBottom = innerHeight - height + 30 + "px", debug.style.left = "0px", debug.style.bottom = "0px", debug.style.color = u, debug.style.opacity = .5, debug.style.background = "rgba(255,255,255,0.5)", debug.style.padding = "4px 6px", debug.style.borderRadius = "4px", debug.style.cursor = "none", debug.style.zindex = "99999"), debug.innerHTML = ""; for (let e = 0; e < Object.keys(t).length; e++)debug.innerHTML += "<i>" + Object.keys(t)[e] + ": </i>" + Object.values(t)[e] + "</br>" }, e.Utils.prototype.getTimeStamp = function (e = !0) { var t = 10 <= second() ? hour() + "-" + minute() + "-" + second() : hour() + "-" + minute() + "-0" + second(), o = year() + "-" + month() + "-" + day(); return e ? o + "_" + t : t }, e.Utils.prototype.saveCanvas = function (e = "", t = "png") { "" == e ? saveCanvas(this.getTimeStamp(), t) : saveCanvas(e + "_" + this.getTimeStamp(), t) }, e.Utils.prototype.arrayResize = function (t, o, i = -1) { for (let e = t.length = 0; e < floor(o); e++)-1 != i && t.push(i); return t.length = floor(o), t }, e.Utils.prototype.beginShadow = function (e, t, o, i) { push(), drawingContext.shadowColor = e, drawingContext.shadowBlur = t, drawingContext.shadowOffsetY = i, drawingContext.shadowOffsetX = o }, e.Utils.prototype.endShadow = function () { pop() }, e.Utils.prototype.beginLinearGradient = function (e, t, o, i, n, l = []) { push(), fill(100), 0 == l.length && (l = this.arrayResize(l, e.length, .5)); var s = drawingContext.createLinearGradient(t, o, i, n); s.addColorStop(0, e[0]); for (var a = 1; a < e.length - 1; a++)s.addColorStop(l[a], e[a]); s.addColorStop(1, e[e.length - 1]), drawingContext.fillStyle = s }, e.Utils.prototype.endLinearGradient = function () { pop() }, e.Utils.prototype.text = function (e, t, o, i = 12, n = "sans-serif", l = LEFT, s = TOP) { push(), "sans-serif" == n || p ? "sans-serif" == n && (a = "sans-serif", textFont(a)) : a = loadFont(n, function () { textFont(a), p = !0 }), textSize(i), textAlign(l, s), text(e, t, o), pop() }, e.Utils.prototype.notify = function (e) { return millis() - t > 1e3 * e && (t = millis(), !0) }, e.Utils.prototype.disableRuler = function () { window.removeEventListener("mousemove", m), o.style.display = "none", n.style.display = "none", canvas.style.marginLeft = "0px", canvas.style.marginTop = "0px", canvas.style.width = width + "px", canvas.style.height = height + "px", d.style.display = "none", s.style.display = "none", r.style.display = "none" }, e.Utils.prototype.enableRuler = function () { var e = document.getElementsByClassName("p5Canvas")[0]; width + h > innerWidth && (e.width = width - h, e.style.width = width - h + "px", parent.width = width - h), height + h > innerHeight && (e.height = height - h, e.style.height = height - h + "px", parent.height = height - h), e.style.marginLeft = h + "px", e.style.marginTop = h + "px", document.getElementsByClassName("pixelRulerH")[0] || ((o = document.createElement("canvas")).className = "pixelRulerH", document.body.appendChild(o)), o.width = width + h > innerWidth ? width : width + h, o.height = h, o.style.zindex = 1e4, o.style.position = "absolute", o.style.left = "0px", o.style.top = "0px", o.style.width = width + h > innerWidth ? width : width + h, o.style.height = "20px", o.style.display = "block", i = o.getContext("2d"), drawHorizontalRuler(), document.getElementsByClassName("pixelRulerV")[0] || ((n = document.createElement("canvas")).className = "pixelRulerV", document.body.appendChild(n)), n.width = h, n.height = height + h > innerHeight ? height : height + h, n.style.zindex = 1e4, n.style.position = "absolute", n.style.left = "0px", n.style.top = "0px", n.style.width = h + "px", n.style.height = height + h > innerHeight ? height : height + h, n.style.display = "block", l = n.getContext("2d"), drawVerticalRuler(), document.getElementsByClassName("rulerLineX")[0] || ((s = document.createElement("div")).className = "rulerLineX", document.body.appendChild(s)), s.style.zindex = 1e5, s.style.position = "absolute", s.style.height = "0px", s.style.display = "block", s.style.border = "none", s.style.borderTop = "1px dashed " + u, s.style.opacity = .7, document.getElementsByClassName("rulerLineY")[0] || ((r = document.createElement("div")).className = "rulerLineY", document.body.appendChild(r)), r.style.zindex = 100001, r.style.position = "absolute", r.style.height = "0px", r.style.width = "0px", r.style.display = "block", r.style.background = "rgba(255,255,255,0.2)", r.style.border = "none", r.style.borderRight = "1px dashed " + u, r.style.opacity = .6, document.getElementsByClassName("rulerInfo")[0] || ((d = document.createElement("div")).className = "rulerInfo", document.body.appendChild(d)), d.style.zindex = 100002, d.style.position = "absolute", d.style.display = "block", d.style.top = "0px", d.style.left = "200px", d.style.fontSize = "11px", d.style.fontFamily = "monospace", d.style.color = u, d.style.background = "rgba(255,255,255,0.5)", d.style.padding = "3px", d.style.cursor = "none", window.addEventListener("mousemove", m) }, drawHorizontalRuler = function () { var e = i; e.clearRect(0, 0, o.width, h), e.fillStyle = y, e.fillRect(0, 0, o.width, h), e.strokeStyle = g, e.lineWidth = 1, e.beginPath(), e.moveTo(0, h), e.lineTo(o.width, h), e.stroke(); for (var t = h; t < o.width; t += 5)e.beginPath(), e.moveTo(t - .5, h), e.lineTo(t - .5, h - 4), e.stroke(); for (t = h; t < o.width; t += 10)e.beginPath(), e.moveTo(t - .5, h), e.lineTo(t - .5, h - 7), e.stroke(); e.fillStyle = g, e.font = "11px monospace", e.textBaseline = "top"; for (t = h; t < o.width; t += 100)e.beginPath(), e.moveTo(t - .5, h), e.lineTo(t - .5, 0), e.stroke(), 0 < t && e.fillText(t.toFixed(0) - h, t + 3, 1) }, drawVerticalRuler = function () { var e = l; e.clearRect(0, 0, h, n.height), e.fillStyle = y, e.fillRect(0, 0, n.width, n.height), e.strokeStyle = g, e.lineWidth = 1, e.beginPath(), e.moveTo(h, 0), e.lineTo(h, n.height), e.stroke(); for (var t = h; t < n.height; t += 5)e.beginPath(), e.moveTo(h, t - .5), e.lineTo(h - 4, t - .5), e.stroke(); for (t = h; t < n.height; t += 10)e.beginPath(), e.moveTo(h, t - .5), e.lineTo(h - 7, t - .5), e.stroke(); e.fillStyle = g, e.font = "11px monospace", e.textBaseline = "top"; for (t = h; t < n.height; t += 100)e.beginPath(), e.moveTo(h, t - .5), e.lineTo(0, t - .5), e.stroke(), t > h && (e.save(), e.translate(1, t), e.rotate(-Math.PI / 2), e.fillText((t - h).toFixed(0), 3, 1), e.restore()) } });