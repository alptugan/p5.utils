!function(e,t){"function"==typeof define&&define.amd?define("p5.Utils",["p5"],(function(e){t(e)})):"object"==typeof exports?t(require("p5")):t(e.p5)}(this,(function(e){let t,o,l,i,n,r,s,a,d,h,p,y,u,g,f,c=!1,m=0;const b=0;function x(e){if(this.drawHorizontalRuler(),null!=o){let a=o.getBoundingClientRect();l.strokeStyle=y,l.beginPath(),l.moveTo(e.pageX-a.left-.5,0),l.lineTo(e.pageX-a.left-.5,d),l.stroke(),this.drawVerticalRuler(),n.strokeStyle=y,n.beginPath(),n.moveTo(0,e.pageY-.5-3),n.lineTo(d,e.pageY-.5-3),n.stroke(),t=e.pageX-d,i=e.pageY-d,r.style.width=t+"px",r.style.marginright=width-t+"px",r.style.left=d+"px",r.style.top=i-4+d+"px",r.style.boxShadow="0px 0px 5px rgba(0,0,0,0.7)",s.style.height=i-4+"px",s.style.width=t-1+d+"px",s.style.marginleft=t-1+"px",s.style.top=d+"px",s.style.boxShadow="0px 0px 5px rgba(0,0,0,0.7)",!1!==f?(rulerInfo.style.display="block",t+70<width&&(rulerInfo.style.left=t+d+10+"px"),i+70<height&&(rulerInfo.style.top=i+d+20+"px"),rulerInfo.innerHTML="x:"+t+"<br>y:"+(i-3)):rulerInfo.style.display="none"}var t,i}e.Utils=function(){this.version=.1,this.att=[],this.row=0,this.col=0,this.setRulerStyle()},e.Utils.prototype.debug=function(e){document.getElementsByClassName("debug")[0]||(debug=document.createElement("div"),debug.className="debug",document.body.appendChild(debug),debug.style.left="2px",debug.style.lineHeight=1.3,debug.style.fontFamily="Consolas, Menlo, Monaco, monospace",debug.style.fontSize="11px",debug.style.fontWeight=100,debug.style.fontStyle="normal",debug.style.fontVariant="normal",debug.style.position="absolute",debug.style.marginLeft="30px",debug.style.marginBottom=innerHeight-height+30+"px",debug.style.left="0px",debug.style.bottom="0px",debug.style.color=h,debug.style.opacity=.5,debug.style.background=p,debug.style.padding="4px 6px",debug.style.borderRadius="4px",debug.style.cursor="none",debug.style.zindex="99999"),debug.innerHTML="";for(let t=0;t<Object.keys(e).length;t++)debug.innerHTML+="<i>"+Object.keys(e)[t]+": </i>"+Object.values(e)[t]+"</br>"},e.Utils.prototype.getTimeStamp=function(e=!0){var t;t=second()>=10?hour()+"-"+minute()+"-"+second():hour()+"-"+minute()+"-0"+second();var o=year()+"-"+month()+"-"+day();return e?o+"_"+t:t},e.Utils.prototype.getRandomInt=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)},e.Utils.prototype.saveCanvas=function(e="",t="png"){""==e?saveCanvas(this.getTimeStamp(),t):saveCanvas(e+"_"+this.getTimeStamp(),t)},e.Utils.prototype.arrayResize=function(e,t,o=-1){e.length=0;for(let l=0;l<floor(t);l++)-1!=o&&e.push(o);return e.length=floor(t),e},e.Utils.prototype.createGrid=function(e,t,o,l,i=0,n=b,r=!0,s=!0){var a,d;this.row=e,this.col=t;var h=e>t?max(o,l):min(o,l),p=max(e,t);h-=i*p;var y=n==b?h/p:h/t,u=n==b?h/p:h/e;(g=(y+i)*t-i)/(f=(u+i)*e-i)>o/l?(y=Math.floor(o/t)-i,u=Math.floor(o/t)-i):(y=Math.floor(l/e)-i,u=Math.floor(l/e)-i);var g=(y+i)*t-i,f=(u+i)*e-i;a=r?Math.floor(.5*(width-g)):0,d=s?Math.floor(.5*(height-f)):0;for(var c=0;c<e;c++)for(var m=0;m<t;m++)this.att.push({x:a+Math.floor(m*(y+i)),y:d+Math.floor(c*(u+i)),w:y,h:u});return this.att},e.Utils.prototype.debugGrid=function(e=12,t=color(0),o=color(0,200)){push();for(var l=0;l<Math.floor(this.row*this.col);l++)noFill(),stroke(o),rect(this.att[l].x,this.att[l].y,this.att[l].w,this.att[l].h),fill(t),noStroke(),textSize(e),text(l,this.att[l].x+.4*e,this.att[l].y+1.2*e);pop()},e.Utils.prototype.beginShadow=function(e,t,o,l){push(),drawingContext.shadowColor=e,drawingContext.shadowBlur=t,drawingContext.shadowOffsetY=l,drawingContext.shadowOffsetX=o},e.Utils.prototype.endShadow=function(){pop()},e.Utils.prototype.beginRadialGradient=function(e,t,o,l,i=-1,n=-1,r=-1,s=-1){if(push(),fill(0),null==e||e.length<2)noLoop();else{-1!==i&&-1!==n&&-1!==r||(i=t,n=o,l=.1*(r=l));var a=drawingContext.createRadialGradient(t,o,l,i,n,r);a.addColorStop(0,e[0]),e.length>2&&(-1==s?a.addColorStop(.5,e[1]):a.addColorStop(s,e[1])),a.addColorStop(1,e[e.length-1]),drawingContext.fillStyle=a}},e.Utils.prototype.endRadialGradient=function(){pop()},e.Utils.prototype.beginLinearGradient=function(e,t,o,l,i,n=[]){push(),fill(100),0==n.length&&(n=this.arrayResize(n,e.length,.5));var r=drawingContext.createLinearGradient(t,o,l,i);r.addColorStop(0,e[0]);for(var s=1;s<e.length-1;s++)r.addColorStop(n[s],e[s]);r.addColorStop(1,e[e.length-1]),drawingContext.fillStyle=r},e.Utils.prototype.endLinearGradient=function(){pop()},e.Utils.prototype.text=function(e,o,l,i=12,n="sans-serif",r=LEFT,s=TOP){push(),"sans-serif"==n||c?"sans-serif"==n&&(t="sans-serif",textFont(t)):t=loadFont(n,(function(){textFont(t),c=!0})),textSize(i),textAlign(r,s),text(e,o,l),pop()},e.Utils.prototype.notify=function(e){return millis()-m>1e3*e&&(m=millis(),!0)},e.Utils.prototype.setRulerStyle=function(e="rgba(30,30,30,1)",t="rgba(150,150,150,1)",o=20,l="rgba(30,30,30,1)",i="rgba(255,255,255,0.5)",n="rgba(255,0,0,1)",r="11px monospace",s=!0){a=void 0!==e?e:"rgba(30,30,30,1)",g=void 0!==t?t:"rgba(150,150,150,1)",d=void 0!==o?o:20,h=void 0!==l?l:"rgba(30,30,30,1)",p=void 0!==i?i:"rgba(255,255,255,0.5)",y=void 0!==n?n:"rgba(255,0,0,1)",u=void 0!==r?r:"11px monospace",f=void 0===s||s},e.Utils.prototype.disableRuler=function(){window.removeEventListener("mousemove",x),o.style.display="none",i.style.display="none",canvas.style.marginLeft="0px",canvas.style.marginTop="0px",canvas.style.width=width+"px",canvas.style.height=height+"px",rulerInfo.style.display="none",r.style.display="none",s.style.display="none"},e.Utils.prototype.enableRuler=function(){var e=document.getElementsByClassName("p5Canvas")[0],t=width,a=height;width+d>innerWidth&&(t=width-d,resizeCanvas(t,height)),height+d>innerHeight&&(a=height-d,resizeCanvas(t,a)),e.style.marginLeft=d+"px",e.style.marginTop=d+"px",document.getElementsByClassName("pixelRulerH")[0]||(o=document.createElement("canvas"),o.className="pixelRulerH",document.body.appendChild(o)),o.width=width+d>innerWidth?width:width+d,o.height=d,o.style.zindex=1e4,o.style.position="absolute",o.style.left="0px",o.style.top="0px",o.style.width=width+d>innerWidth?width:width+d,o.style.height=d+"px",o.style.display="block",l=o.getContext("2d"),drawHorizontalRuler(),document.getElementsByClassName("pixelRulerV")[0]||(i=document.createElement("canvas"),i.className="pixelRulerV",document.body.appendChild(i)),i.width=d,i.height=height+d>innerHeight?height:height+d,i.style.zindex=1e4,i.style.position="absolute",i.style.left="0px",i.style.top="0px",i.style.width=d+"px",i.style.height=height+d>innerHeight?height:height+d,i.style.display="block",n=i.getContext("2d"),drawVerticalRuler(),document.getElementsByClassName("rulerLineX")[0]||(r=document.createElement("div"),r.className="rulerLineX",document.body.appendChild(r)),r.style.zindex=1e5,r.style.position="absolute",r.style.height="0px",r.style.display="block",r.style.border="none",r.style.borderTop="1px dashed "+h,r.style.opacity=.7,document.getElementsByClassName("rulerLineY")[0]||(s=document.createElement("div"),s.className="rulerLineY",document.body.appendChild(s)),s.style.zindex=100001,s.style.position="absolute",s.style.height="0px",s.style.width="0px",s.style.display="block",s.style.background="rgba(255,255,255,0.2)",s.style.border="none",s.style.borderRight="1px dashed "+h,s.style.opacity=.6,document.getElementsByClassName("rulerInfo")[0]||(rulerInfo=document.createElement("div"),rulerInfo.className="rulerInfo",document.body.appendChild(rulerInfo)),rulerInfo.style.zindex=100002,rulerInfo.style.position="absolute",rulerInfo.style.display="block",rulerInfo.style.top="0px",rulerInfo.style.left="0px",rulerInfo.style.fontSize="11px",rulerInfo.style.fontFamily="monospace",rulerInfo.style.color=h,rulerInfo.style.background=p,rulerInfo.style.padding="3px",rulerInfo.style.cursor="none",window.addEventListener("mousemove",x)},drawHorizontalRuler=function(){var e=l;e.clearRect(0,0,o.width,d),e.fillStyle=a,e.fillRect(0,0,o.width,d),e.strokeStyle=g,e.lineWidth=1,e.beginPath(),e.moveTo(0,d),e.lineTo(o.width,d),e.stroke();for(var t=d;t<o.width;t+=5)e.beginPath(),e.moveTo(t-.5,d),e.lineTo(t-.5,d-4),e.stroke();for(t=d;t<o.width;t+=10)e.beginPath(),e.moveTo(t-.5,d),e.lineTo(t-.5,d-7),e.stroke();e.fillStyle=g,e.font=u,e.textBaseline="top";for(t=d;t<o.width;t+=100)e.beginPath(),e.moveTo(t-.5,d),e.lineTo(t-.5,0),e.stroke(),t>0&&e.fillText(t.toFixed(0)-d,t+3,1)},drawVerticalRuler=function(){var e=n;e.clearRect(0,0,d,i.height),e.fillStyle=a,e.fillRect(0,0,i.width,i.height),e.strokeStyle=g,e.lineWidth=1,e.beginPath(),e.moveTo(d,0),e.lineTo(d,i.height),e.stroke();for(var t=d;t<i.height;t+=5)e.beginPath(),e.moveTo(d,t-.5),e.lineTo(d-4,t-.5),e.stroke();for(t=d;t<i.height;t+=10)e.beginPath(),e.moveTo(d,t-.5),e.lineTo(d-7,t-.5),e.stroke();e.fillStyle=g,e.font=u,e.textBaseline="top";for(t=d;t<i.height;t+=100)e.beginPath(),e.moveTo(d,t-.5),e.lineTo(0,t-.5),e.stroke(),t>d&&(e.save(),e.translate(1,t),e.rotate(-Math.PI/2),e.fillText((t-d).toFixed(0),3,1),e.restore())}}));